** 環境
   :PROPERTIES:
   :CUSTOM_ID: 環境
   :END:
|                 |                                                                            |
| エディター      | vim                                                                        |
| LSPクライアント | vim-lsp                                                                    |
| PythonのLSP     | [[https://github.com/palantir/python-language-server]]                     |
| 他              | [[https://github.com/mattn/vim-lsp-settings][mattn/vim-lsp-settings]] 使用 |
|                 |                                                                            |
|                 |                                                                            |

** pyls-mypy
   :PROPERTIES:
   :CUSTOM_ID: pyls-mypy
   :END:
/pyls-mypy/
はその名前の通り、Pyls(palantir氏のもの)にmypy対応させるプラグインです。

私は型大好き人間でAnnotationを頻繁に使うため、入れます。

*** Install先
    :PROPERTIES:
    :CUSTOM_ID: install先
    :END:
/pyls/ を /vim-lsp-settings/
で導入しているので、それがインストールしているのと同じ環境に /pyls-mypy/
を入れてあげる 必要があります。

これは、 =XDG_DATA_HOME= が設定されていれば
=XDG_DATA_HOME/vim-lsp-settings/servers= 、設定されていなければ
=~/.local/share/vim-lsp-settings/servers= になります。

又、 =pyls= 自体はそのディレクトリの下に =pyls-all/venv=
等としてvenvを作っています。 なので、それを呼べばいいわけです。

自分用のスクリプトがdotfileにあるのですが、まだcommitしてないので実際の処理部分のみ載せます。
後にリンクに変えるかもしれません。

#+begin_src shell
  vimLspSettings_dataDir="${XDG_DATA_HOME:-$HOME/.local/share}/vim-lsp-settings}"

  [[ -d $vimLspSettings_dataDir ]] && {
      . "${vimLspSettings_dataDir}/servers/pyls-all/venv/bin/activate"
      pip install pyls-mypy
      deactivate
  }
#+end_src
